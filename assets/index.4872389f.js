import{S,P as H,G as B,W as R,a as T,M as u,b as m,c as A,A as O,d as z,e as k,O as E,V as c,f as L,C as W,B as q,L as I,g as N,h as U,E as Y,i as j,j as M,T as D,k as V,l as K}from"./vendor.4af0efd2.js";const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};Z();class J{Update(e){var r=new c;r.y=e.position.y+10,r.z=e.position.z+10,r.x=e.position.x,f.position.lerp(r,.2)}}class Q{constructor(e){this.curve,this.CreateRoad(e),this.DrawRoad()}CreateRoad(e){let r=!1,t=[new c(0,0,0)],o=25;for(let i=1;i<=e.length;i++){let a,d=this.CreateSign(6,e[i-1]);r==!1?(a=new c(L.randFloat(5,20),0,i*o),t.push(a),d.position.set(a.x-10,0,a.z),r=!0):(a=new c(L.randFloat(-5,-20),0,i*o),t.push(a),d.position.set(a.x+10,0,a.z),r=!1)}console.log(t);const n=new W(t);n.type="chordal",n.closed=!1,this.curve=n}DrawRoad(){const e=this.curve.getPoints(80),r=new q().setFromPoints(e),t=new I({color:16777215}),o=new N(r,t);l.add(o);var n={steps:100,bevelEnabled:!0,extrudePath:this.curve,bevelThickness:0},i=new U;i.moveTo(0,0),i.lineTo(0,-5),i.lineTo(0,5);var a=new Y(i,n),d=new j({color:4606285,wireframe:!1}),w=new m(a,d);l.add(w)}CreateSign(e,r){let t=new M,o=new T(7,4),n=new D().load(r),i=new u({map:n}),a=new m(o,i),d=new m(o,i);d.rotateY(Math.PI*1),a.position.y=e,d.position.y=e,t.add(a),t.add(d);let w=this.CreatePillar(e-a.geometry.parameters.height/2),P=this.CreatePillar(e-a.geometry.parameters.height/2),C=2;w.position.x=-a.geometry.parameters.width/2+C,P.position.x=a.geometry.parameters.width/2-C,t.add(w),t.add(P);let G=this.CreateFrame(a);return t.add(G),l.add(t),t}CreatePillar(e){let r=new V(.2,.2,e,32),t=new u({color:5067095}),o=new m(r,t);return o.position.y=e/2,o}CreateFrame(e){let r=new M,t=e.geometry.parameters,o=this.CreateFrameBox(t.width+.1,.1),n=this.CreateFrameBox(t.width+.1,.1),i=this.CreateFrameBox(.1,t.height),a=this.CreateFrameBox(.1,t.height);return o.position.y=e.position.y+t.height/2,n.position.y=e.position.y+-t.height/2,i.position.y=e.position.y,a.position.y=e.position.y,i.position.x=-t.width/2,a.position.x=t.width/2,r.add(o),r.add(n),r.add(i),r.add(a),r}CreateFrameBox(e,r){let t=new K(e,r,.3),o=new u({color:5067095});return new m(t,o)}}class X{constructor(e){this.car=e,this.carPosition=new c,l.add(this.car)}MoveCarOnRoad(e){const t=performance.now()-de;h+=g,h=h%1,s.carPosition.copy(e.getPointAt(h)),s.carPosition.y+=.7,s.carPosition.x+=-3,s.car.position.copy(s.carPosition),x.copy(e.getTangentAt(h)),g-=x.y*1e-7*t,g=Math.max(5e-4,Math.min(2e-4,g)),s.car.lookAt(le.copy(s.carPosition).sub(x))}}const l=new S,f=new H(75,window.innerWidth/window.innerHeight,.1,1e3);var _=new J;const $=new B,y=new R({canvas:document.querySelector("#bg")});y.setPixelRatio(window.devicePixelRatio);y.setSize(window.innerWidth,window.innerHeight);f.position.setZ(40);f.position.setY(20);const ee=new T(100,300),te=new u({color:16737095}),v=new m(ee,te);v.position.setY(-.1);v.rotation.x=Math.PI*-.5;var s;$.load("car.glb",function(p){s=new X(p.scene)});l.add(v);new c;const b=new A(16777215);b.position.set(5,5,5);const oe=new O(16777215);l.add(b,oe);const re=new z(20);l.add(re);const ne=new k(200,50);l.add(ne);new E(f,y.domElement);f.rotation.x=-.7;let ae=["TeleTavleHelper.png","TeleTavleHelper.png","TeleTavleHelper.png","TeleTavleHelper.png","TeleTavleHelper.png","TeleTavleHelper.png"];var ie=new Q(ae);document.body.onscroll=se;function se(){const p=document.body.getBoundingClientRect().top;s.position.z=-p*.01}const x=new c,le=new c;let g=0,h=0,de=performance.now();function F(){requestAnimationFrame(F),s&&(s.MoveCarOnRoad(ie.curve),_.Update(s.car)),y.render(l,f)}F();
